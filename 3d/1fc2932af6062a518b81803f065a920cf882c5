Received: from Hermes.metastack.local (172.16.0.8) by Hermes.metastack.local
 (172.16.0.8) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.32 via Mailbox
 Transport; Wed, 30 Aug 2023 09:09:11 +0100
Received: from Hermes.metastack.local (172.16.0.8) by Hermes.metastack.local
 (172.16.0.8) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256) id 15.1.2507.32; Wed, 30 Aug
 2023 09:09:11 +0100
Received: from exchange.romulus.metastack.com (172.16.0.21) by
 Hermes.metastack.local (172.16.0.8) with Microsoft SMTP Server
 (version=TLS1_0, cipher=TLS_RSA_WITH_AES_256_CBC_SHA) id 15.1.2507.32 via
 Frontend Transport; Wed, 30 Aug 2023 09:09:11 +0100
Received: from romulus.metastack.com ([172.16.0.20])
	by exchange.romulus.metastack.com (8.14.2/8.14.2) with ESMTP id 37U88eFk013917
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <dra@metastack.local>; Wed, 30 Aug 2023 09:08:40 +0100
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by romulus.metastack.com (8.14.2/8.14.2) with ESMTP id 37U88WxE013901
	for <dra-news@metastack.com>; Wed, 30 Aug 2023 09:08:32 +0100
Received: from prod-listesu18.inria.fr (HELO sympa.inria.fr) ([128.93.162.160])
  by mail2-relais-roc.national.inria.fr with ESMTP; 30 Aug 2023 10:08:32 +0200
Received: by sympa.inria.fr (Postfix, from userid 20132)
	id 6F621E0CD4; Wed, 30 Aug 2023 10:08:31 +0200 (CEST)
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by sympa.inria.fr (Postfix) with ESMTPS id 5B256E0AF1
	for <caml-list@sympa.inria.fr>; Wed, 30 Aug 2023 10:08:25 +0200 (CEST)
Received: from zcs-store1.inria.fr ([128.93.142.28])
  by mail2-relais-roc.national.inria.fr with ESMTP; 30 Aug 2023 10:08:26 +0200
From: Florian Angeletti <florian.angeletti@inria.fr>
To: caml-list <caml-list@inria.fr>
Subject: [Caml-list] Second release candidate for OCaml 5.1.0
Thread-Topic: Second release candidate for OCaml 5.1.0
Thread-Index: AQHZ2xlCrNLDSO6ukkqIUr11qGlcoA==
Sender: "caml-list-request@inria.fr" <caml-list-request@inria.fr>
X-MS-Exchange-MessageSentRepresentingType: 2
Date: Wed, 30 Aug 2023 09:08:25 +0100
Message-ID: <1508820154.827312.1693382905209.JavaMail.zimbra@inria.fr>
References: <1683360478.6348093.1681545181983.JavaMail.zimbra@inria.fr>
 <614877951.14559857.1685692007861.JavaMail.zimbra@inria.fr>
 <285796528.1775709.1688494250152.JavaMail.zimbra@inria.fr>
 <76ead9ad-28e4-c3a7-e567-ac8afe812c00@inria.fr>
Keywords: Sent to dra-news@metastack.com,Marked bulk,MetaStack -
 Lists,MetaStack
List-Help: <mailto:sympa_inria@inria.fr?subject=help>
List-Subscribe: <mailto:sympa_inria@inria.fr?subject=subscribe%20caml-list>
List-Unsubscribe:
	<mailto:sympa_inria@inria.fr?subject=unsubscribe%20caml-list>
In-Reply-To: <76ead9ad-28e4-c3a7-e567-ac8afe812c00@inria.fr>
Reply-To: Florian Angeletti <florian.angeletti@inria.fr>
Content-Language: en-GB
X-MS-Exchange-Organization-AuthAs: Anonymous
X-MS-Exchange-Organization-AuthSource: Hermes.metastack.local
X-MS-Has-Attach:
X-Auto-Response-Suppress: All
X-MS-Exchange-Organization-Network-Message-Id:
	6825b0dd-cdcb-4606-bc38-08dba93064b7
X-MS-TNEF-Correlator:
X-MS-Exchange-Organization-RecordReviewCfmType: 0
x-scanned-by: MIMEDefang 2.65 on 62.31.23.242
x-originating-ip: [128.93.64.106]
received-spf: None (mail2-relais-roc.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@sympa.inria.fr) identity=helo;  client-ip=128.93.162.160;
  receiver=mail2-relais-roc.national.inria.fr;
  envelope-from="caml-list-owner@inria.fr";
  x-sender="postmaster@sympa.inria.fr"; x-conformance=spf_only
x-ironport-av: E=Sophos;i="6.02,213,1688421600";    d="scan'208";a="123389725"
x-loop: caml-list@inria.fr
x-no-archive: yes
Content-Type: text/plain; charset="iso-8859-1"
Content-ID: <30BCB0F36B238947BB0162D098A170D1@metastack.local>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Dear OCaml users,

In the last two weeks, two significant bugs have been discovered in the rel=
ease candidate for OCaml 5.1.0 (one affecting the type system, another in t=
he runtime).

Those bugs are now fixed and we are publishing a second release candidate t=
o check that everything is in order before the release in the upcoming week=
.

If you find any bugs, please report them on OCaml's issue tracker (https://=
github.com/ocaml/ocaml/issues).

The full change log for OCaml 5.1.0 is available on GitHub (https://github.=
com/ocaml/ocaml/blob/5.1/Changes).
A short summary of the two bug fixes in this release candidate is also avai=
lable below.

Happy hacking,
Florian Angeletti for the OCaml team.

----------------------------------------
Installation Instructions

The base compiler can be installed as an opam switch with the following com=
mands on opam 2.1 and later:

    opam update
    opam switch create 5.1.0~rc2

The source code for the release candidate is also directly available on:

* GitHub : https://github.com/ocaml/ocaml/archive/5.1.0-rc2.tar.gz
* OCaml archives at Inria : https://caml.inria.fr/pub/distrib/ocaml-5.1/oca=
ml-5.1.0~rc2.tar.gz

If you want to tweak the configuration of the compiler, you can switch to t=
he option variant with:

    opam update
    opam switch create <switch_name> ocaml-variants.5.1.0~rc2+options <opti=
on_list>

where `<option_list>` is a comma-separated list of `ocaml-option-*` package=
s. For instance, for a `flambda` and `no-flat-float-array` switch:

    opam switch create 5.1.0~rc2+flambda+nffa ocaml-variants.5.1.0~rc2+opti=
ons ocaml-option-flambda ocaml-option-no-flat-float-array

All available options can be listed with `opam search ocaml-option`.

-------------------------

## Last Minute Bug Fixes in the rc2

### Type System:

* (*breaking change*) [#6941](https://github.com/ocaml/ocaml/issues/6941), =
[#11187](https://github.com/ocaml/ocaml/issues/11187), +[#12483](https://gi=
thub.com/ocaml/ocaml/issues/12483): prohibit using classes through recursiv=
e modules
   inheriting or including a class belonging to a mutually-recursive module
   would previous behave incorrectly, and now results in a clean error.
   (Leo White, review by Gabriel Scherer and Florian Angeletti)

### Runtime

- [#12481](https://github.com/ocaml/ocaml/issues/12481), [#12505](https://g=
ithub.com/ocaml/ocaml/issues/12505): Fix incorrect initialization of array =
expressions
  `[|e1;...;eN|]` when `N` is large enough to require major heap allocation=
.
  (Xavier Leroy, report by Andrey Popp, analysis by KC Sivaramakrishnan
   and Vincent Laviron, review by Gabriel Scherer)
